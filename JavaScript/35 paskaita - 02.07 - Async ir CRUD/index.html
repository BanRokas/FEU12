<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>35 paskaita - Async ir CRUD</title>
  <link rel="stylesheet" href="./main.css">
  <script type="module" src="./main.js"></script>
</head>
<body>
  <main>
    <section> <!-- Async -->
      <h1>Asinchroninis programavimas</h1>
      <p>
        Asinchroninio programavimo idėja yra ta, kad kol vykdosi vienas kodas, galima leisti vykdytis kitam kodui. Kitaip pasakius atlikinėti keletą veiksmų vienu metu.
      </p>
      <h4>Step by step</h4>
      <ol>
        <li>setTimeout(callback, time)</li>
        <li>Promise(resolve, reject)</li>
        <li>then catch finally</li>
        <li>asyncF await</li>
        <li>try catch finally codeBlocks</li>
      </ol>
      <div> <!-- setTimeout -->
        <h3>setTimeout</h3>
        <p>
          SetTimeout funkcija, atlieka kažkokius veiksmus (callback) po nurodyto laiko tarpo.
        </p>
        <p>
          setTimeout(()=>{ ... veiksmai ... }, 1000);
        </p>
      </div>
      <div> <!-- Promise -->
        <h3>Promise</h3>
        <p>
          Rašant asinchroninį kodą yra kuriami Promise'ai (pažadai).<br>
          Promise'ai pažada grąžinti kažkokį atsakymą, kurio Promiso iškvietimo momentu mes dar neturime.<br>
          Promise po kažkiek laiko mums grąžins atsakymą, kurį yra pažadėjęs (resolve'ins) ARBA dėl kažkokios priežasties negrąžins norimo atsakymo, grąžins kažkokią užklausos atmetimo informaciją (reject'ins).
        </p>
        <p>
          Promise((resolve, reject) => {
            if(good){
              resolve('answer');
            } else if(bad0){
              reject('error0');
            } else if(bad1){
              reject('error1');
            } else {
              reject('errorSomething');
            }
          });
        </p>
      </div>
      <div> <!-- then catch finally -->
        <h3>then catch finally</h3>
        <p>
          Then, catch ir finally gali būti naudojami tik su funkcijomis, kurios grąžina Promise'us.<br>
          Kai pažadas yra grąžinamas, tik tuomet vykdosi then arba catch.<br>
          Then vykdosi tuomet kai Promise'as yra resolve'inamas.<br>
          Catch vykdosi tuomet kai Promise'as ura reject'inamas arba then viduje įvyksta klaida.<br>
          Finally vykdosi po visų then'ų ar catch'ų.
        </p>
        <p>
          Promise(...).then().then().then().catch().finally()
        </p>
      </div>
      <div> <!-- asyncF ir await -->
        <h3>Async ir await</h3>
        <p>
          Rašant kodą asinchroniškai, kartais prireikia kažkiek luktelėti kol bus atlikti vieni ar kiti veiksmai.<br>
          Tam, kad palauktume atsakymo, reikia kažkaip uždelsti kodą.<br>
          Tai galima padaryti su: setTimeout (blogai, nes kuriamas callbackHell); thenCatchFinally (good enough) arba su async await (better?).
        </p>
        <p>
          Norint rašyti asinchroninį kodą su async ir await, reikia:<br>
          Promise'o (funkcijos, kuri grąžina pažadą);<br>
          Asinchroninės funkcijos, kurioje kreipiamasi į Promise'ą.<br>
          Await raktinio žodžio prieš kreipimąsį į Promise'ą.<br>
          extra: try catch finally blokų (pažiūrėsim vėliau)
        </p>
        <p>
          async function name(){ const ats = await Promise(); ats+='keisti' }
        </p>
      </div>
      <div> <!-- try catch finally codeBlocks -->
        <h3>Try Catch Finally</h3>
        <p>
          Try, Catch ir Finally yra naudojami norint aprašyti error'ų handle'inimą gražia, patogia ir lengvai skaitoma sintakse.<br>
          Try bloke kodas yra vykdomas jeigu nėra error'ų.<br>
          Catch blokas yra vykdomas jeigu try bloke įvyko error'as.<br>
          Finally blokas vykdomas po try/catch.
        </p>
        <p>
          try{ ... veiksmai ... }catch(err){ ... veiksmai su err ... }finally{ ... veiksmai ... }
        </p>
      </div>
    </section>
    <section id="crud"> <!-- CRUD -->
      <h1>Pridėti aukštąją mokyklą</h1>
      <form>
        <div>
          <label for="name">Pavadinimas</label>
          <input type="text" name="name" id="name">
        </div>
        <div>
          <label for="city">Miestas</label>
          <select name="city" id="city">
            <option value="Kaunas">Kaunas</option>
            <option value="Vilnius">Vilnius</option>
            <option value="Klaipėda">Klaipėda</option>
            <option value="Šiauliai">Šiauliai</option>
            <option value="Panevėžys">Panevėžys</option>
            <option value="Alytus">Alytus</option>
            <option value="Ukmergė">Ukmergė</option>
            <option value="Tauragė">Tauragė</option>
            <option value="Utena">Utena</option>
          </select>
        </div>
        <div>
          <label for="fNr">Fakultetų kiekis</label>
          <input type="number" name="fNr" id="fNr">
        </div>
        
        <input type="submit" value="Pridėti">
      </form>
      <h1>Mūsų aukštųjų mokyklų sąrašas</h1>
      <div>

      </div>
    </section>
  </main>
</body>
</html>